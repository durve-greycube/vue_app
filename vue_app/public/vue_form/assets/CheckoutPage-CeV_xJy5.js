import{x as _,o as l,f as m,h as v,e as p,i as h,b as k,u as e,c as x,w as g,m as c,p as V,y,s as b,v as C,a as O,z as P,D as $}from"./index-CbvUErCk.js";const M={name:"ErrorMessage",props:["message"],computed:{errorMessage(){return this.message?this.message instanceof Error?this.message.messages||this.message.message:this.message:""}}},A=["innerHTML"];function D(f,t,a,n,r,i){return a.message?(l(),m("div",{key:0,class:"whitespace-pre-line text-sm text-red-600",role:"alert",innerHTML:i.errorMessage},null,8,A)):v("",!0)}const E=_(M,[["render",D]]),w={key:0},z={class:"p-2",required:!0},N={__name:"CheckoutPage",setup(f){const t=V("cart"),a=p(""),n=y(),r=p(!1),i=h(),u=k({url:"vue_app.api.checkout_cart",makeParams(){return{products:t.items,address:a.value}},onSuccess(d){i.success("Order placed successfully!",{position:"bottom-right",timeout:2e3,closeOnClick:!0,pauseOnHover:!0}),t.items=[],console.log("Order placed successfully:",d.name),n.push({name:"OrderConfirmationPage",makeParams(){return{orderId:d.name}}})}},a.value="");return(d,s)=>(l(),m("div",null,[e(t).items.length===0?(l(),m("p",w,"Cart Empty")):(l(),x(e(C),{key:1,loading:e(u).loading,variant:"solid",onClick:s[0]||(s[0]=o=>r.value=!0)},{default:g(()=>s[3]||(s[3]=[b(" Place Order ")])),_:1},8,["loading"])),c(e($),{options:{title:"Add Address Details",size:"2xl",actions:[{label:"Proceed",variant:"solid",size:"lg",onclick:()=>{r.value=!1,e(u).submit(),e(n).push({name:"OrderConfirmationPage"})}}]},modelValue:r.value,"onUpdate:modelValue":s[2]||(s[2]=o=>r.value=o)},{"body-content":g(()=>[O("div",z,[c(e(P),{type:"textarea",ref_for:!0,size:"sm",variant:"subtle",placeholder:"Address Details",disabled:!1,label:"Address",modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=o=>a.value=o)},null,8,["modelValue"])])]),_:1},8,["options","modelValue"]),c(e(E),{message:e(u).error},null,8,["message"])]))}};export{N as default};
